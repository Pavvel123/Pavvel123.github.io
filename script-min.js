const timetable=[{day:"Poniedziałek",classes:[{time:"07:15 - 08:00"},{time:"08:15 - 09:00"},{time:"09:15 - 10:00",subject:"Projekt grupowy I",room:"AUD.NOV",teacher:"dr inż. Sławomir Gajewski",type:"P",week:"AB"},{time:"10:15 - 11:00",subject:"Projekt grupowy I",room:"AUD.NOV",teacher:"dr inż. Sławomir Gajewski",type:"P",week:"AB"},{time:"11:15 - 12:00",subject:"Inżynieria oprogramowania",room:"NE AUD1P",teacher:"dr inż. Aleksander Jarzębowicz",type:"W",week:"AB"},{time:"12:15 - 13:00",subject:"Inżynieria oprogramowania",room:"NE AUD1P",teacher:"dr inż. Aleksander Jarzębowicz",type:"W",week:"AB"},{time:"13:15 - 14:00",subject:"Aplikacje systemów wbudowanych",room:"NE AUD1P",teacher:"dr inż. Krzysztof Bikonis",type:"W",week:"AB"},{time:"14:15 - 15:00",subject:"Systemy wbudowane i mikroprocesory",room:"NE AUD1P",teacher:"dr inż. Krzysztof Bikonis",type:"W",week:"AB"},{time:"15:15 - 16:00"},{time:"16:15 - 17:00"},{time:"17:15 - 18:00",subject:"Hurtownie danych",room:"Zajęcia zdalne",teacher:"dr inż. Teresa Zawadzka",type:"W",week:"AB",EndDate:"2025-11-14"},{time:"18:15 - 19:00",subject:"Hurtownie danych",room:"Zajęcia zdalne",teacher:"dr inż. Teresa Zawadzka",type:"W",week:"AB",EndDate:"2025-11-14"}]},{day:"Wtorek",classes:[{time:"07:15 - 08:00"},{time:"08:15 - 09:00"},{time:"09:15 - 10:00"},{time:"10:15 - 11:00"},{time:"11:15 - 12:00",subject:"Sieci komputerowe - laboratorium",room:"EA 204",teacher:"mgr inż. Jakub Grochowski",type:"L",week:"A"},{time:"11:15 - 12:00",subject:"Architektury usług internetowych",room:"WP 111",teacher:"mgr Anna Domagalska",type:"L",week:"B"},{time:"12:15 - 13:00",subject:"Sieci komputerowe - laboratorium",room:"EA 204",teacher:"mgr inż. Jakub Grochowski",type:"L",week:"A"},{time:"12:15 - 13:00",subject:"Architektury usług internetowych",room:"WP 111",teacher:"mgr Anna Domagalska",type:"L",week:"B"},{time:"13:15 - 14:00",subject:"Aplikacje systemów wbudowanych",room:"EA 438",teacher:"dr inż. Krzysztof Bikonis",type:"L",week:"AB"},{time:"14:15 - 15:00",subject:"Aplikacje systemów wbudowanych",room:"EA 438",teacher:"dr inż. Krzysztof Bikonis",type:"L",week:"AB"},{time:"15:15 - 16:00",subject:"Biznes elektroniczny",room:"NE AUD1L",teacher:"dr inż. Andrzej Sobecki",type:"W",week:"AB",EndDate:"2025-11-15"},{time:"16:15 - 17:00",subject:"Biznes elektroniczny",room:"NE AUD1L",teacher:"dr inż. Andrzej Sobecki",type:"W",week:"AB",EndDate:"2025-11-15"},{time:"17:15 - 18:00",subject:"Biznes elektroniczny",room:"WP 121",teacher:"dr inż. Andrzej Sobecki",type:"P",week:"A"},{time:"18:15 - 19:00",subject:"Biznes elektroniczny",room:"WP 121",teacher:"dr inż. Andrzej Sobecki",type:"P",week:"A"}]},{day:"Środa",classes:[{time:"07:15 - 08:00"},{time:"08:15 - 09:00",subject:"Wizualizacja informacji",room:"EA 401",teacher:"mgr inż. Jerzy Redlarski",type:"P",week:"AB",StartDate:"2025-11-30"},{time:"09:15 - 10:00",subject:"Wizualizacja informacji",room:"EA 401",teacher:"mgr inż. Jerzy Redlarski",type:"P",week:"AB",StartDate:"2025-11-30"},{time:"10:15 - 11:00"},{time:"11:15 - 12:00",subject:"Język angielski III",room:"Gmach B 313",teacher:"mgr Ewa Rogala",type:"Ć",week:"AB"},{time:"12:15 - 13:00",subject:"Język angielski III",room:"Gmach B 313",teacher:"mgr Ewa Rogala",type:"Ć",week:"AB"},{time:"13:15 - 14:00",subject:"Społeczne aspekty informatyki",room:"NE AUD1P",teacher:"dr inż. Jakub Miler",type:"W",week:"AB",EndDate:"2025-11-23"},{time:"13:15 - 14:00",subject:"Systemy informacji przestrzennej",room:"EA 643",teacher:"dr hab. Zbigniew Łubniewski",type:"L",week:"AB",StartDate:"2025-11-30"},{time:"14:15 - 15:00",subject:"Społeczne aspekty informatyki",room:"NE AUD1P",teacher:"dr inż. Jakub Miler",type:"W",week:"AB",EndDate:"2025-11-23"},{time:"14:15 - 15:00",subject:"Systemy informacji przestrzennej",room:"EA 643",teacher:"dr hab. Zbigniew Łubniewski",type:"L",week:"AB",StartDate:"2025-11-30"},{time:"15:15 - 16:00",subject:"Systemy informacji przestrzennej",room:"NE AUD1L",teacher:"dr hab. Marcin Kulawiak",type:"W",week:"AB",EndDate:"2025-11-23"},{time:"16:15 - 17:00",subject:"Systemy informacji przestrzennej",room:"NE AUD1L",teacher:"dr hab. Marcin Kulawiak",type:"W",week:"AB",EndDate:"2025-11-23"},{time:"17:15 - 18:00",subject:"Hurtownie danych",room:"EA AUD2",teacher:"dr inż. Teresa Zawadzka",type:"W",week:"AB",EndDate:"2025-10-01"},{time:"18:15 - 19:00",subject:"Hurtownie danych",room:"EA AUD2",teacher:"dr inż. Teresa Zawadzka",type:"W",week:"AB",EndDate:"2025-10-01"},{time:"19:15 - 20:00",subject:"Projekt grupowy I",room:"NE 205",teacher:"dr inż. Krzysztof Gierłowski",type:"P",week:"AB"},{time:"20:15 - 21:00",subject:"Projekt grupowy I",room:"NE 205",teacher:"dr inż. Krzysztof Gierłowski",type:"P",week:"AB"}]},{day:"Czwartek",classes:[{time:"07:15 - 08:00"},{time:"08:15 - 09:00",subject:"Społeczne aspekty informatyki (co 3 tygodnie)",room:"NE 209",teacher:"dr inż. Jakub Miler",type:"P",week:"AB"},{time:"09:15 - 10:00",subject:"Społeczne aspekty informatyki (co 3 tygodnie)",room:"NE 209",teacher:"dr inż. Jakub Miler",type:"P",week:"AB"},{time:"10:15 - 11:00",subject:"Społeczne aspekty informatyki (co 3 tygodnie)",room:"NE 209",teacher:"dr inż. Jakub Miler",type:"P",week:"AB"},{time:"11:15 - 12:00",subject:"Wizualizacja informacji",room:"EA AUD2",teacher:"dr inż. Jacek Lebiedź",type:"W",week:"AB",EndDate:"2025-11-17"},{time:"12:15 - 13:00",subject:"Wizualizacja informacji",room:"EA AUD2",teacher:"dr inż. Jacek Lebiedź",type:"W",week:"AB",EndDate:"2025-11-17"},{time:"13:15 - 14:00",subject:"Hurtownie danych",room:"EA 436",teacher:"mgr inż. Aleksandra Nabożny",type:"L",week:"AB"},{time:"14:15 - 15:00",subject:"Hurtownie danych",room:"EA 436",teacher:"mgr inż. Aleksandra Nabożny",type:"L",week:"AB"}]},{day:"Piątek",classes:[{time:"07:15 - 08:00"},{time:"08:15 - 09:00"},{time:"09:15 - 10:00"},{time:"10:15 - 11:00"},{time:"11:15 - 12:00",subject:"Inżynieria oprogramowania",room:"WP 121",teacher:"dr inż. Maciej Kucharski",type:"L",week:"AB"},{time:"12:15 - 13:00",subject:"Inżynieria oprogramowania",room:"WP 121",teacher:"dr inż. Maciej Kucharski",type:"L",week:"AB"},{time:"13:15 - 14:00",subject:"Architektury usług internetowych",room:"NE AUD1P",teacher:"mgr inż. Michał Wójcik",type:"W",week:"AB"},{time:"14:15 - 15:00",subject:"Architektury usług internetowych",room:"NE AUD1P",teacher:"mgr inż. Michał Wójcik",type:"W",week:"AB"}]}],todayDate=new Date,weekdayNames=["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],currentDay=weekdayNames[todayDate.getDay()],refDate=new Date("2025-09-29"),diffMs=todayDate-refDate,diffWeeks=Math.floor(diffMs/6048e5),currentWeekLetter=diffWeeks%2==0?"A":"B";function formatTimeRange(e){return e.split(" - ").map((e=>e.startsWith("0")?e.slice(1):e)).join(" - ")}function isTimeSlotActive(e){const[t,a]=e.split(" - "),[r,n]=t.split(":").map(Number),[i,o]=a.split(":").map(Number),c=new Date,s=new Date(c.getFullYear(),c.getMonth(),c.getDate(),r,n),d=new Date(s.getTime()-9e5),m=new Date(c.getFullYear(),c.getMonth(),c.getDate(),i,o);return c>=d&&c<m}function styleType(e,t){if(t)return`<span style="color:rgb(210, 210, 210);">[${e}]</span>`;switch(e){case"W":return'<span style="color: white; background-color: blue; padding: 1px;">[W]</span>';case"L":return'<span style="color: white; background-color: purple; padding: 1px;">[L]</span>';case"Ć":return'<span style="color: black; background-color: pink; padding: 1px;">[Ć]</span>';case"P":return'<span style="color: black; background-color: orange; padding: 1px;">[P]</span>';default:return`<span>[${e}]</span>`}}function buildDesktopTimetable(){const e=document.getElementById("desktopTimetable");e.innerHTML="";const t=document.createElement("tr"),a=document.createElement("th");a.rowSpan=2,t.appendChild(a),timetable.forEach((e=>{const a=document.createElement("th");a.colSpan=2,a.textContent=e.day,t.appendChild(a)})),e.appendChild(t);const r=document.createElement("tr");timetable.forEach((()=>{const e=document.createElement("th");e.textContent="A";const t=document.createElement("th");t.textContent="B",r.appendChild(e),r.appendChild(t)})),e.appendChild(r);let n=new Set;timetable.forEach((e=>{e.classes.forEach((e=>n.add(e.time)))}));Array.from(n).sort().forEach((t=>{const a=document.createElement("tr"),r=document.createElement("td");r.textContent=formatTimeRange(t),a.appendChild(r),timetable.forEach((e=>{const r=e.classes.filter((e=>e.time===t));let n=[],i=[],o=[];if(r.forEach((e=>{const t=e.StartDate&&e.StartDate>todayDate.toISOString().split("T")[0]||e.EndDate&&e.EndDate<todayDate.toISOString().split("T")[0];let a=`${e.room}<br>${styleType(e.type,t)} <strong>${e.subject}</strong><br>${e.teacher}`;if(e.StartDate||e.EndDate){let t=[];e.StartDate&&t.push(`od ${e.StartDate}`),e.EndDate&&t.push(`do ${e.EndDate}`),a+=`<br><em>${t.join(" | ")}</em>`}t&&(a=`<span style="color:rgb(210, 210, 210);">${a}</span>`),"AB"===e.week?o.push(a):"A"===e.week?n.push(a):"B"===e.week&&i.push(a)})),o.length>0){const r=document.createElement("td");r.colSpan=2,r.innerHTML=o.join("<br><br>"),e.day===currentDay&&isTimeSlotActive(t)&&(r.style.outline="3px solid orange"),a.appendChild(r)}else{const r=document.createElement("td");r.innerHTML=n.join("<br><br>")||"",e.day===currentDay&&"A"===currentWeekLetter&&isTimeSlotActive(t)&&(r.style.outline="3px solid orange");const o=document.createElement("td");o.innerHTML=i.join("<br><br>")||"",e.day===currentDay&&"B"===currentWeekLetter&&isTimeSlotActive(t)&&(o.style.outline="3px solid orange"),a.appendChild(r),a.appendChild(o)}})),e.appendChild(a)}))}function buildMobileTimetable(e,t){const a=document.getElementById("mobileTimetable");a.innerHTML="";const r=timetable.find((t=>t.day===e));if(!r)return;const n=document.createElement("tr"),i=document.createElement("th"),o=document.createElement("th");o.textContent=`${e} (Tydzień ${t})`,n.appendChild(i),n.appendChild(o),a.appendChild(n);let c=new Set;r.classes.forEach((e=>c.add(e.time)));Array.from(c).sort().forEach((n=>{const i=document.createElement("tr"),o=document.createElement("td");o.textContent=formatTimeRange(n),o.style.minWidth="100px",i.appendChild(o);const c=r.classes.filter((e=>e.time===n&&("AB"===e.week||e.week===t)));let s=[];c.forEach((e=>{const t=e.StartDate&&e.StartDate>todayDate.toISOString().split("T")[0]||e.EndDate&&e.EndDate<todayDate.toISOString().split("T")[0];let a=`${e.room}<br>${styleType(e.type,t)} <strong>${e.subject}</strong><br>${e.teacher}`;if(e.StartDate||e.EndDate){let t=[];e.StartDate&&t.push(`od ${e.StartDate}`),e.EndDate&&t.push(`do ${e.EndDate}`),a+=`<br><em>${t.join(" | ")}</em>`}t&&(a=`<span style="color:rgb(210, 210, 210);">${a}</span>`),s.push(a)}));const d=document.createElement("td");d.innerHTML=s.join("<br><br>"),i.appendChild(d),e===currentDay&&t==currentWeekLetter&&isTimeSlotActive(n)&&(i.style.outline="3px solid orange"),a.appendChild(i)}))}function updateSelectBackground(e,t){e.value===t?e.style.backgroundColor="lightgreen":e.style.backgroundColor=""}document.getElementById("updateParagraph").innerHTML=`Aktualny tydzień: ${currentWeekLetter}<br>Ostatnia aktualizacja: 21 lutego 2025`,buildDesktopTimetable();const daySelect=document.getElementById("daySelect"),weekSelect=document.getElementById("weekSelect");function updateMobileView(){buildMobileTimetable(daySelect.value,weekSelect.value),updateSelectBackground(daySelect,currentDay),updateSelectBackground(weekSelect,currentWeekLetter)}function setMobileNav(){"Sobota"==currentDay||"Niedziela"==currentDay?(selectActualButton.innerText="Plan na najbliższy poniedziałek",daySelect.value="Poniedziałek",weekSelect.value="A"==currentWeekLetter?"B":"A"):(daySelect.value=currentDay,weekSelect.value=currentWeekLetter)}daySelect.addEventListener("change",updateMobileView),weekSelect.addEventListener("change",updateMobileView);const selectActualButton=document.getElementById("selectActual");setMobileNav(),selectActualButton.addEventListener("click",(()=>{setMobileNav(),updateMobileView()})),updateMobileView();
